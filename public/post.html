<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Big Mike's Guitar Tabs - Tabs</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css">
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Cutive+Mono&display=swap" rel="stylesheet">
  <style>
    body {
      font-family: Cutive Mono, arial;
      background: #222;
      background: linear-gradient(rgba(0, 0, 0, 0.764), rgba(0, 0, 55, 0.3)), url('https://cdn.pixabay.com/photo/2021/01/13/13/51/vintage-5914183_1280.jpg');
      background-repeat: no-repeat;
      background-size: cover;
      background-position: center center;
      padding-top: 0px !important;
      display: flex;
      /* justify-content: center;
        align-items: center; */
      height: 120vh;
  
      padding-right: 0 !important;
      z-index: 0 !important;
    }
  
    @media screen and (max-width: 806px) {
      .myLogo {
        font-size: 16px !important;
      }
    }
  
    @media screen and (max-width: 434px) {
      .myLogo {
        font-size: 12px !important;
      }
    }

  
     @media screen and (max-width: 561px) {
      .postBod {
        font-size: 12px !important;
        
      }
    }

    @media screen and (max-width: 467px) {
      .postBod {
        font-size: 11px !important;
      }
    }

    @media screen and (max-width: 423px) {
      .postBod {
        font-size: 10px !important;
      }
    }
     @media screen and (max-width: 423px) {
      .postBod {
        font-size: 9px !important;
      }
    }

    @media screen and (max-width: 349px) {
      .postBod {
        font-size: 8px !important;
      }
    }
  
    .nav-wrapper {
      background-color: black;
    }
  
    .brand-logo {
      margin-left: 1%;
    }
  
    .card-image {
      background-position: top !important;
      height: 300px;
    }
  
    .card {
      height: 410px;
    }
  
    .image-reveal {
      width: 100%;
    }
  
    .btn-floating {
      position: fixed;
      right: 20px;
      bottom: 10px;
    }
  
    .nav-wrapper a:hover {
      background: #ddd;
      color: black;
    }
  
    .viewPost {
      padding-bottom: 10px !important;
    }
  
    .homeDiv {
      margin-bottom: 0px;
    }
  
    .active {
      background-color: grey !important;
    }

    .postBod {
      white-space: pre-line;
    }
    .spacerRow {
      height: 10vh;
    }
  </style>
</head>
<body>


<div class="navbar-fixed">
  <nav>
    <div class="nav-wrapper black">
      <a href="/" class="brand-logo myLogo" id="logoButton">BigMike's Guitar Tabs</a>
      <a href="#" data-target="mobile-demo" class="sidenav-trigger"><i class="material-icons">menu</i></a>
      <ul class="right hide-on-med-and-down">
        <li id="homePage" class=''><a href="/">Home</a></li>
        <!-- <li id="tabs"><a href="/tabs">Tabs</a></li> -->
        <li id="profilePage"><a href="/profile">My Profile</a></li>
        <li id="createNav"><a href="/create">Create</a></li>
        <li id="aboutPage"><a href="/about">About</a></li>
        <li id="signOutConditional"></li>

      </ul>
    </div>
  </nav>
</div>
<ul class="sidenav" id="mobile-demo" style="width: 50vw;">
  <li id="homePageNav"><a href="/">Home</a></li>
  <li id="profilePageNav"><a href="/profile">My Profile</a></li>
  <li id="createSideNav"><a href="/create">Create</a></li>
  <!-- <li id="tabsNav"><a href="/tabs">Tabs</a></li> -->
  <li id="aboutPageNav"><a href="/about">About</a></li>
  <li id="signOutNav"></li>
</ul>






<div class="container">
  <div class="row spacerRow"></div>
  <div class="row center">
    <!-- <h1 class="section white-text homeDiv">Home</h1> -->
    <h4 id="postSong" class="white-text"></h4>
    <h4 id="postArtist" class="white-text"></h4>
    <h5 id="postUser" class="white-text"></h5>
  </div>
 
  <div id="postBody" class="#fafafa grey lighten-5 postBod center row"></div>
  

  </div>
  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
  
  <script>
    //here we render the post by id that the user clicked on, 


    // save the post id in local storage since we are going across multiple pages
    let postId = window.location.pathname

    console.log(window.location, 'this is location')

    axios.get(`/api/${postId}`, {
      headers: {
        'Authorization': `Bearer ${localStorage.getItem('token')}`
      }
    })
      .then(({ data }) => {
        console.log(data, 'this is post data')
        //get req or offer

        //render post
        document.getElementById('postSong').innerHTML = data.song
        document.getElementById('postArtist').innerHTML = data.artist
        document.getElementById('postBody').innerHTML = data.body
        document.getElementById('postUser').innerHTML = `posted by: ${data.User.username}`
        

        //render the comment onto the page
        //     data.comments.forEach(comment => {
        //       document.getElementById('comments').innerHTML += `
        // <li class="collection-item #212121 grey darken-4 white-text">${comment.body}</li>
        // `
        //     })

      })
      .catch(err => console.log(err))


        function displaySignOut() {

            localStorage.getItem('token')
            if (localStorage.getItem("token") === null) {
              const signOut2 = document.createElement('li')
              signOut2.innerHTML = `
      <li id="logInButtonMain"><a href="/login">Log In</a></li>
      `
              document.getElementById('signOutConditional').append(signOut2)
              document.getElementById('logInButtonMain').addEventListener('click', event => {
                window.location = '/login'
              })


            } else {

              const signOut1 = document.createElement('li')
              signOut1.innerHTML = `
      <li id="signOutMain"><a href="/login">Sign Out</a></li>
      `
              document.getElementById('signOutConditional').append(signOut1)
              document.getElementById('signOutMain').addEventListener('click', event => {
                localStorage.removeItem('token')
                window.location = '/login'
              })

            }
          }

          function displaySignOutNav() {

            localStorage.getItem('token')
            if (localStorage.getItem("token") === null) {
              const signOut2 = document.createElement('li')
              signOut2.innerHTML = `
      <li id="logInButtonNav"><a href="/login">Log In</a></li>
      `
              document.getElementById('signOutNav').append(signOut2)
              document.getElementById('logInButtonNav').addEventListener('click', event => {
                window.location = '/login'
              })
            } else {

              const signOut1 = document.createElement('li')
              signOut1.innerHTML = `
      <li id="signOutButtonNav"><a href="/login">Sign Out</a></li>
      `
              document.getElementById('signOutNav').append(signOut1)
              document.getElementById('signOutButtonNav').addEventListener('click', event => {
                localStorage.removeItem('token')
                window.location = '/login'
              })
            }
          }


          displaySignOut()
          displaySignOutNav()

          //this is for hamburger, signout and navbar buttons

            //for hamburger menu
            document.addEventListener('DOMContentLoaded', function () {
              var elems = document.querySelectorAll('.sidenav');
              var instances = M.Sidenav.init(elems, options);
            });

            M.AutoInit();
            document.addEventListener('DOMContentLoaded', function () {
              var elems = document.querySelectorAll('select');
              var instances = M.FormSelect.init(elems, options);
            });





            document.getElementById('logoButton').addEventListener('click', event => {
              window.location = '/'
            })

            document.getElementById('createNav').addEventListener('click', event => {
              window.location = '/create'
            })

            document.getElementById('createSideNav').addEventListener('click', event => {
              window.location = '/create'
            })

            document.getElementById('homePage').addEventListener('click', event => {
              window.location = '/'
            })

            document.getElementById('homePageNav').addEventListener('click', event => {
              window.location = '/'
            })

            document.getElementById('profilePage').addEventListener('click', event => {
              window.location = '/profile'
            })

            document.getElementById('profilePageNav').addEventListener('click', event => {
              window.location = '/profile'
            })



// document.getElementById('aboutPage').addEventListener('click', event => {
//   window.location = '/aboutus'
// })

// document.getElementById('aboutPageNav').addEventListener('click', event => {
//   window.location = '/aboutus'
// })

// document.getElementById('signOut').addEventListener('click', event => {
//   localStorage.removeItem('token')
//   window.location = '/login'
// })

// document.getElementById('signOutNav').addEventListener('click', event => {
//   localStorage.removeItem('token')
//   window.location = '/login'
// })
          

  </script>
</body>


</html>